<nav class="navbar navbar-expand bg-white shadow">

  <%= link_to 'BLOG', home_path, class: 'navbar-brand' %>

  <div class="collapse navbar-collapse" id="navbarSupportedContent-333">

    <ul class="navbar-nav">
      <li class="nav-item">
        <%= link_to 'Article List', articles_path, class: 'nav-link' %>
      </li>
    </ul>
    <% if logged_in? %>
      <ul class="navbar-nav">
        <% if policy(Article).new? %>
          <li class="nav-item">
            <%= link_to 'New Article', new_article_path, class: 'nav-link' %>
          </li>
        <% end %>

        <% if policy(User).index? %>
          <li class="nav-item">
            <%= link_to 'User list', users_path, class: 'nav-link' %>
          </li>
        <% end %>

        <% if policy(User).new? %>
          <li class="nav-item">
            <%= link_to 'New user', register_path, class: 'nav-link' %>
          </li>
        <% end %>
      </ul>


      <ul class="navbar-nav ml-auto ">
        <li class="nav-item dropdown">

          <a class="nav-link dropdown-toggle mr-5" href="#" data-toggle="dropdown">
            <% if current_user.avatar.attached? %>
              <%= image_tag current_user.avatar.variant(resize: "40x40"), class: 'rounded-circle' %>
            <% else %>
              <%= image_tag "no-user.png", alt: "NO USER", size: "40", class: 'rounded-circle' %>
            <% end %>
            <%= current_user.name %>
          </a>
          <div class="dropdown-menu mr-5">
            <p class="dropdown-item"> <%= link_to 'Perfil', edit_user_path(current_user) %> </p>
            <div class="dropdown-divider"></div>
            <%= link_to 'Logout', logout_path, method: :delete, class: 'dropdown-item' %>
          </div>
        </li>
      </ul>

    <% else %>
      <ul class="navbar-nav ml-auto ">
        <li class="nav-item">
          <%= link_to 'Login', login_path, class: 'nav-link' %>
        </li>
        <li class="nav-item">
          <%= link_to 'Register', register_path, class: 'nav-link' %>
        </li>
      </ul>
    <% end %>
  </div>
</nav>

